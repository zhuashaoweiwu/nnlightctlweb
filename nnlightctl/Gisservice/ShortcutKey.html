<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <title>灯具道路地理信息--快捷键</title>
    <link rel="stylesheet" type="text/css" href="../css/common.css" />
    <link rel="stylesheet" type="text/css" href="../css/admin.css" />
    <link rel="stylesheet" type="text/css" href="../css/iconfont/iconfont.css" />
</head>
<body>
    <div class="page-container">
        <form class="form form-horizontal" id="form-admin-add">
        <div style="width:50%" class="f-l">
            <div class="row cl">
                <label class="form-label col-xs-4 col-sm-3 text-r" id="cutkey1">快捷键1：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box" style="width:150px;">
                        <select class="select" name="senceParent1" id="senceParent1">
                            <option value="0">请选择场景</option>
                        </select>
                    </span>
                </div>
            </div>
            <div class="row cl mt-10">
                <label class="form-label col-xs-4 col-sm-3 text-r" id="cutkey2">快捷键2：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box" style="width:150px;">
                        <select class="select" name="senceParent2" id="senceParent2">
                            <option value="0">请选择场景</option>
                        </select>
                    </span>
                </div>
            </div>
            <div class="row cl mt-10">
                <label class="form-label col-xs-4 col-sm-3 text-r" id="cutkey3">快捷键3：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box" style="width:150px;">
                        <select class="select" name="senceParent3" id="senceParent3">
                            <option value="0">请选择场景</option>
                        </select>
                    </span>
                </div>
            </div>
            <div class="row cl mt-10">
                <label class="form-label col-xs-4 col-sm-3 text-r" id="cutkey4">快捷键4：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box" style="width:150px;">
                        <select class="select" name="senceParent4" id="senceParent4">
                            <option value="0">请选择场景</option>
                        </select>
                    </span>
                </div>
            </div>
        </div>
        <div style="width:50%" class="f-r">
            <div class="row cl">
                <label class="form-label col-xs-4 col-sm-3 text-r" id="cutkey5">快捷键5：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box" style="width:150px;">
                        <select class="select" name="senceParent5" id="senceParent5">
                            <option value="0">请选择场景</option>
                        </select>
                    </span>
                </div>
            </div>
            <div class="row cl mt-10">
                <label class="form-label col-xs-4 col-sm-3 text-r" id="cutkey6">快捷键6：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box" style="width:150px;">
                        <select class="select" name="senceParent6" id="senceParent6">
                            <option value="0">请选择场景</option>
                        </select>
                    </span>
                </div>
            </div>
            <div class="row cl mt-10">
                <label class="form-label col-xs-4 col-sm-3 text-r" id="cutkey7">快捷键7：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box" style="width:150px;">
                        <select class="select" name="senceParent7" id="senceParent7">
                            <option value="0">请选择场景</option>
                        </select>
                    </span>
                </div>
            </div>
            <div class="row cl mt-10">
                <label class="form-label col-xs-4 col-sm-3 text-r" id="cutkey8">快捷键8：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box" style="width:150px;">
                        <select class="select" name="senceParent8" id="senceParent8">
                            <option value="0">请选择场景</option>
                        </select>
                    </span>
                </div>
            </div>
        </div>
        <div class="clear"></div>
        <div class="row cl mt-20">
            <div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-3">
                <input class="btn btn-primary radius" type="submit" value="&nbsp;&nbsp;提交&nbsp;&nbsp;">
            </div>
        </div>
        </form>
    </div>

    <!--_footer 作为公共模版分离出去-->
    <script type="text/javascript" src="../js/jquery.min.js"></script>
    <script type="text/javascript" src="../lib/layer/2.4/layer.js"></script>
    <script type="text/javascript" src="../js/common.js"></script>
    <script type="text/javascript" src="../js/admin.js"></script>

    <script type="text/javascript" src="../js/api/requestRoot.js"></script>
    <script type="text/javascript" src="../js/api/ajaxScript.js"></script>
    <!--/_footer 作为公共模版分离出去-->
    <!--请在下方写此页面业务相关的脚本-->
    <script type="text/javascript" src="../lib/jquery.validation/1.14.0/jquery.validate.js"></script>
    <script type="text/javascript" src="../lib/jquery.validation/1.14.0/validate-methods.js"></script>
    <script type="text/javascript" src="../lib/jquery.validation/1.14.0/messages_zh.js"></script>
    <script type="text/javascript">
$(function () {
        $("#form-admin-add").validate({
            rules: {
                institution: {
                    required: true,
                    minlength: 1,
                    maxlength: 64
                }
            },
            onkeyup: false,
            focusCleanup: true,
            success: "valid",
            submitHandler: function (form) {
                //ajax上传表单
                //构造上传数据
                var param = {};
                var paramArray = $(form).serializeArray();
                for (var i = 0; i < paramArray.length; ++i) {
                    var o = paramArray[i];
                    param[o["name"]] = o["value"];
                }
                // param["id"] = 1;
                // for(var i=1; i<9; i++){
                //
                // }
                var options=$("#senceParent1 option:selected");
                param["shotcutName"] = $("#cutkey1").text();
                param["nnlightctlSceneId"] = options.val();
                param["id"] = 1;
                ajaxRequest("post", "/api/scene/addOrUpdateSceneShotcut", param, function (data) {
                    if (data) {
                        if (data.header.code == 1000) {
                            if (editModel(window.location.href)) {
                                layer.msg("编辑场景信息成功！", {icon : 1, time : 3000});
                            } else {
                                layer.msg("添加场景信息成功！", {icon : 1, time : 3000});
                            }
                        } else {
                            layer.msg(data.header.msg, {icon : 2, time : 3000});
                        }
                    }
                });
                var options2=$("#senceParent2 option:selected");
                param["shotcutName"] = $("#cutkey2").text();
                param["nnlightctlSceneId"] = options2.val();
                param["id"] = 2;
                ajaxRequest("post", "/api/scene/addOrUpdateSceneShotcut", param, function (data) {
                    if (data) {
                        if (data.header.code == 1000) {
                            if (editModel(window.location.href)) {
                                layer.msg("编辑场景信息成功！", {icon : 1, time : 3000});
                            } else {
                                layer.msg("添加场景信息成功！", {icon : 1, time : 3000});
                            }
                        } else {
                            layer.msg(data.header.msg, {icon : 2, time : 3000});
                        }
                    }
                });
                var options3=$("#senceParent3 option:selected");
                param["shotcutName"] = $("#cutkey3").text();
                param["nnlightctlSceneId"] = options2.val();
                param["id"] = 3;
                ajaxRequest("post", "/api/scene/addOrUpdateSceneShotcut", param, function (data) {
                    if (data) {
                        if (data.header.code == 1000) {
                            if (editModel(window.location.href)) {
                                layer.msg("编辑场景信息成功！", {icon : 1, time : 3000});
                            } else {
                                layer.msg("添加场景信息成功！", {icon : 1, time : 3000});
                            }
                        } else {
                            layer.msg(data.header.msg, {icon : 2, time : 3000});
                        }
                    }
                });
                var options4=$("#senceParent4 option:selected");
                param["shotcutName"] = $("#cutkey4").text();
                param["nnlightctlSceneId"] = options4.val();
                param["id"] = 4;
                ajaxRequest("post", "/api/scene/addOrUpdateSceneShotcut", param, function (data) {
                    if (data) {
                        if (data.header.code == 1000) {
                            if (editModel(window.location.href)) {
                                layer.msg("编辑场景信息成功！", {icon : 1, time : 3000});
                            } else {
                                layer.msg("添加场景信息成功！", {icon : 1, time : 3000});
                            }
                        } else {
                            layer.msg(data.header.msg, {icon : 2, time : 3000});
                        }
                    }
                });
                var options5=$("#senceParent5 option:selected");
                param["shotcutName"] = $("#cutkey5").text();
                param["nnlightctlSceneId"] = options5.val();
                param["id"] = 5;
                ajaxRequest("post", "/api/scene/addOrUpdateSceneShotcut", param, function (data) {
                    if (data) {
                        if (data.header.code == 1000) {
                            if (editModel(window.location.href)) {
                                layer.msg("编辑场景信息成功！", {icon : 1, time : 3000});
                            } else {
                                layer.msg("添加场景信息成功！", {icon : 1, time : 3000});
                            }
                        } else {
                            layer.msg(data.header.msg, {icon : 2, time : 3000});
                        }
                    }
                });
                var options6=$("#senceParent6 option:selected");
                param["shotcutName"] = $("#cutkey6").text();
                param["nnlightctlSceneId"] = options2.val();
                param["id"] = 6;
                ajaxRequest("post", "/api/scene/addOrUpdateSceneShotcut", param, function (data) {
                    if (data) {
                        if (data.header.code == 1000) {
                            if (editModel(window.location.href)) {
                                layer.msg("编辑场景信息成功！", {icon : 1, time : 3000});
                            } else {
                                layer.msg("添加场景信息成功！", {icon : 1, time : 3000});
                            }
                        } else {
                            layer.msg(data.header.msg, {icon : 2, time : 3000});
                        }
                    }
                });
                var options7=$("#senceParent7 option:selected");
                param["shotcutName"] = $("#cutkey7").text();
                param["nnlightctlSceneId"] = options7.val();
                param["id"] = 7;
                ajaxRequest("post", "/api/scene/addOrUpdateSceneShotcut", param, function (data) {
                    if (data) {
                        if (data.header.code == 1000) {
                            if (editModel(window.location.href)) {
                                layer.msg("编辑场景信息成功！", {icon : 1, time : 3000});
                            } else {
                                layer.msg("添加场景信息成功！", {icon : 1, time : 3000});
                            }
                        } else {
                            layer.msg(data.header.msg, {icon : 2, time : 3000});
                        }
                    }
                });
                var options8=$("#senceParent8 option:selected");
                param["shotcutName"] = $("#cutkey8").text();
                param["nnlightctlSceneId"] = options2.val();
                param["id"] = 8;
                ajaxRequest("post", "/api/scene/addOrUpdateSceneShotcut", param, function (data) {
                    if (data) {
                        if (data.header.code == 1000) {
                            if (editModel(window.location.href)) {
                                layer.msg("编辑场景信息成功！", {icon : 1, time : 3000});
                            } else {
                                layer.msg("添加场景信息成功！", {icon : 1, time : 3000});
                            }
                        } else {
                            layer.msg(data.header.msg, {icon : 2, time : 3000});
                        }
                    }
                });

                ResetWindow();
            }
        });

    //刷新场景列表
    function flushsence() {
    ajaxRequest("post", "/api/scene/listScene", {}, function (data) {
        if (data) {
            if (data.header.code == 1000) {
                var sceneArray = data.body.data;
                var $sceneSelect = $(".select");
                var id = editModel(window.location.href);
                for (var i = 0; i < sceneArray.length; ++i) {
                    var scene = sceneArray[i];
                    if (!id || scene.id != id) {
                        $('<option value="' + scene.id + '">' + scene.sceneName + '</option>').appendTo($sceneSelect);
                    }
                }
            }
        }
    });
    }
    flushsence();




})
    </script>
</body>
</html>
