<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta http-equiv="Cache-Control" content="no-siteapp"/>

    <title>灯具道路地理信息--快捷键</title>
    <link rel="stylesheet" type="text/css" href="../css/common.css"/>
    <link rel="stylesheet" type="text/css" href="../css/admin.css"/>
    <link rel="stylesheet" type="text/css" href="../css/iconfont/iconfont.css"/>
    <style>
        .row {
            width: 50%;
            float: left;
        }

        .f-l {
            width: 100%;
        }
    </style>
</head>
<body>
<div class="page-container">
    <form class="form form-horizontal" id="form-admin-add">
        <div class="f-l">
            <div class="row cl">
                <label class="form-label col-xs-4 col-sm-3 text-r" id="cutkey1">快捷键1：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box" style="width:150px;">
                        <select class="select" name="senceParent1" id="senceParent1"
                                onchange="getform('快捷键1','1','senceParent1')">
                            <option value="0">请选择场景</option>
                        </select>
                    </span>
                </div>
            </div>
            <div class="row cl mt-10">
                <label class="form-label col-xs-4 col-sm-3 text-r" id="cutkey2">快捷键2：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box" style="width:150px;">
                        <select class="select" name="senceParent2" id="senceParent2"
                                onchange="getform('快捷键2','2','senceParent2')">
                            <option value="0">请选择场景</option>
                        </select>
                    </span>
                </div>
            </div>
            <div class="row cl mt-10">
                <label class="form-label col-xs-4 col-sm-3 text-r" id="cutkey3">快捷键3：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box" style="width:150px;">
                        <select class="select" name="senceParent3" id="senceParent3"
                                onchange="getform('快捷键3','3','senceParent3')">
                            <option value="0">请选择场景</option>
                        </select>
                    </span>
                </div>
            </div>
            <div class="row cl mt-10">
                <label class="form-label col-xs-4 col-sm-3 text-r" id="cutkey4">快捷键4：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box" style="width:150px;">
                        <select class="select" name="senceParent4" id="senceParent4"
                                onchange="getform('快捷键4','4','senceParent4')">
                            <option value="0">请选择场景</option>
                        </select>
                    </span>
                </div>
            </div>

            <div class="row cl">
                <label class="form-label col-xs-4 col-sm-3 text-r" id="cutkey5">快捷键5：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box" style="width:150px;">
                        <select class="select" name="senceParent5" id="senceParent5"
                                onchange="getform('快捷键5','5','senceParent5')">
                            <option value="0">请选择场景</option>
                        </select>
                    </span>
                </div>
            </div>
            <div class="row cl mt-10">
                <label class="form-label col-xs-4 col-sm-3 text-r" id="cutkey6">快捷键6：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box" style="width:150px;">
                        <select class="select" name="senceParent6" id="senceParent6"
                                onchange="getform('快捷键6','6','senceParent6')">
                            <option value="0">请选择场景</option>
                        </select>
                    </span>
                </div>
            </div>
            <div class="row cl mt-10">
                <label class="form-label col-xs-4 col-sm-3 text-r" id="cutkey7">快捷键7：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box" style="width:150px;">
                        <select class="select" name="senceParent7" id="senceParent7"
                                onchange="getform('快捷键7','7','senceParent7')">
                            <option value="0">请选择场景</option>
                        </select>
                    </span>
                </div>
            </div>
            <div class="row cl mt-10">
                <label class="form-label col-xs-4 col-sm-3 text-r" id="cutkey8">快捷键8：</label>
                <div class="formControls col-xs-8 col-sm-9">
                    <span class="select-box" style="width:150px;">
                        <select class="select" name="senceParent8" id="senceParent8"
                                onchange="getform('快捷键8','8','senceParent8')">
                            <option value="0">请选择场景</option>
                        </select>
                    </span>
                </div>
            </div>
        </div>
        <div class="clear"></div>
        <!--<div class="row cl mt-20">-->
        <!--<div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-3">-->
        <!--<input class="btn btn-primary radius" type="submit" value="&nbsp;&nbsp;提交&nbsp;&nbsp;">-->
        <!--</div>-->
        <!--</div>-->
    </form>
</div>

<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="../js/common.js"></script>
<script type="text/javascript" src="../js/admin.js"></script>

<script type="text/javascript" src="../js/api/requestRoot.js"></script>
<script type="text/javascript" src="../js/api/ajaxScript.js"></script>
<!--/_footer 作为公共模版分离出去-->
<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" src="../lib/jquery.validation/1.14.0/jquery.validate.js"></script>
<script type="text/javascript" src="../lib/jquery.validation/1.14.0/validate-methods.js"></script>
<script type="text/javascript" src="../lib/jquery.validation/1.14.0/messages_zh.js"></script>
<script type="text/javascript">
    function getform(t, i, s) {
        var param = {};
        param["shotcutName"] = i;
        var op = $("#" + s);
        param["nnlightctlSceneId"] = op.val();
        param["id"] = op.attr("sceneShotcutId");
        ajaxRequest("post", "/api/scene/addOrUpdateSceneShotcut", param, function (data) {
            if (data) {
                if (data.header.code == 1000) {

                } else {
                    layer.msg(data.header.msg, {icon: 2, time: 3000});
                }
            }
        });
    }

    $(function () {
        //刷新场景列表
        function flushsence() {
            ajaxRequest("post", "/api/scene/listScene", {}, function (data) {
                console.log(data)
                if (data) {
                    if (data.header.code == 1000) {
                        var sceneArray = data.body.data;
                        var $sceneSelect = $(".select");
                        for (var i = 0; i < sceneArray.length; ++i) {
                            var scene = sceneArray[i];
                            $('<option value="' + scene.id + '">' + scene.sceneName + '</option>').appendTo($sceneSelect);
                        }
                    }

                    flushshortcut();
                }
            });
        }

        flushsence();

        //刷新场景映射列表
        function flushshortcut() {
            ajaxRequest("post", "/api/scene/listSceneShotCut", {}, function (data) {
                console.log(data)
                if (data) {
                    if (data.header.code == 1000) {
                        var shortcutArray = data.body.data;
                        console.log(shortcutArray)
                        for (var i = 0; i < shortcutArray.length; ++i) {
                            var shortcut = shortcutArray[i];
                            var $OpSelect;
                            switch (shortcut.shotcutName) {
                                case "1":
                                    $("#senceParent1").val(shortcut.nnlightctlSceneId);
                                    $OpSelect = $("#senceParent1");
                                    break;
                                case "2":
                                    $("#senceParent2").val(shortcut.nnlightctlSceneId);
                                    $OpSelect = $("#senceParent2");
                                    break;
                                case "3":
                                    $("#senceParent3").val(shortcut.nnlightctlSceneId);
                                    $OpSelect = $("#senceParent3");
                                    break;
                                case "4":
                                    $("#senceParent4").val(shortcut.nnlightctlSceneId);
                                    $OpSelect = $("#senceParent4");
                                    break;
                                case "5":
                                    $("#senceParent5").val(shortcut.nnlightctlSceneId);
                                    $OpSelect = $("#senceParent5");
                                    break;
                                case "6":
                                    $("#senceParent6").val(shortcut.nnlightctlSceneId);
                                    $OpSelect = $("#senceParent6");
                                    break;
                                case "7":
                                    $("#senceParent7").val(shortcut.nnlightctlSceneId);
                                    $OpSelect = $("#senceParent7");
                                    break;
                                case "8":
                                    $("#senceParent8").val(shortcut.nnlightctlSceneId);
                                    $OpSelect = $("#senceParent8");
                                    break;
                            }
                            if ($OpSelect) {
                                $OpSelect.attr("sceneShotcutId", shortcut.id);
                            }

                        }
                    }
                }
            });
        }
    });
</script>
</body>
</html>
